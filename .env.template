#!/bin/bash
# Environment configuration for nascent-lulcc project

# Project paths  
export NASCENT_LULCC_HOME="/cluster/home/bblack/nascent-lulcc"
export NASCENT_LULCC_SRC="$NASCENT_LULCC_HOME/src"
export NASCENT_LULCC_SCRIPTS="$NASCENT_LULCC_HOME/scripts"
export NASCENT_LULCC_CONFIG="$NASCENT_LULCC_HOME/config"

# Scratch paths (create these on HPC scratch filesystem)
export NASCENT_LULCC_SCRATCH="/cluster/scratch/bblack/nascent-lulcc"
export NASCENT_LULCC_DATA="$NASCENT_LULCC_SCRATCH/data"
export NASCENT_LULCC_RESULTS="$NASCENT_LULCC_SCRATCH/results" 
export NASCENT_LULCC_LOGS="$NASCENT_LULCC_SCRATCH/logs"

# System paths
export CONDA_ENVS_PATH="/cluster/home/bblack/environments"
export R_LIBS_USER="/cluster/home/bblack/lib/R"
export MAMBA_EXE="/cluster/home/bblack/tools/micromamba"

# Temporary directories  
export TMPDIR="$NASCENT_LULCC_SCRATCH/temp"
export R_TMPDIR="$TMPDIR/R"

# Performance settings
export OMP_NUM_THREADS=${SLURM_CPUS_PER_TASK:-1}
export OPENBLAS_NUM_THREADS=${SLURM_CPUS_PER_TASK:-1}
export GDAL_NUM_THREADS=ALL_CPUS
export GDAL_CACHEMAX=8192

# Create necessary directories
mkdir -p "$R_LIBS_USER" "$CONDA_ENVS_PATH"
